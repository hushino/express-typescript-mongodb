<% include ./layouts/header %>
<h1>Panel de Administracion</h1>
<div class="container">
    <div class="row">
        <div class="col">

            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Email</th>
                        <th scope="col">Rol</th>
                        <th scope="col">Estado de cuenta</th>
                        <th scope="col">CUIT</th>
                        <th scope="col">ID</th>
                        <th scope="col">DNI adelante</th>
                        <th scope="col">DNI atras</th>
                        <th scope="col">Editar</th>
                        <th scope="col">Borrar</th>
                    </tr>
                </thead>

                <tbody>
                    <% if(typeof admincuenta !== 'undefined') { %>

                    <% admincuenta.forEach(function(admincuenta) { %>
                    <tr>
                        <td><%- admincuenta.email%></td>
                        <td><%- admincuenta.role.substring(0,25) %></td>
                        <td><button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#exampleModal">
                                <%- admincuenta.estadodecuenta %>
                            </button>
                            <%- include('form2', {admincuenta: admincuenta}); %>
                        </td>
                        <td><%- admincuenta.cuit  %></td>
                        <td><%- admincuenta._id  %></td>
                        <td><img style="max-width: 13% !important;" class="img-fluid" id="image-home"
                                src="http://localhost:3000/<%- admincuenta.fotodnidelante %>">
                        </td>
                        <td><img style="max-width: 13% !important;" class="img-fluid" id="image-home"
                                src="http://localhost:3000/<%- admincuenta.fotodniatras %>">
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#editarModal">
                                Editar
                            </button>
                            <%- include('editarmodal', {admincuenta: admincuenta}); %>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#borrarModal">
                                Borrar
                            </button>
                            <%- include('borrarmodal', {admincuenta: admincuenta}); %>
                        </td>
                    </tr>
                    <% }); %>
                    <% } %>

                </tbody>
            </table>

            <nav aria-label="Page navigation example">
                <% if(typeof pages !== 'undefined') { %>
                <% if (pages > 0) { %>
                <ul class="pagination">
                    <% if (current == 1) { %>
                    <li class="page-item"><a class="page-link" class="disabled">
                            << </a> <% } else { %> <a class="page-link" href="/administrador/1">
                                <<</a> <% } %> <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
                                    <% if (i !== 1) { %> <a class="page-link" class="disabled">...
                        </a></li>
                    <% } %>
                    <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
                    <% if (i == current) { %>
                    <li class="page-item"><a class="page-link active"><%= i %></a></li>
                    <% } else { %>
                    <li class="page-item"><a class="page-link" href="/administrador/<%= i %>"><%= i %></a></li>
                    <% } %>
                    <% if (i == Number(current) + 4 && i < pages) { %>
                    <li class="page-item"><a class="page-link disabled">...</a></li>
                    <% } %>
                    <% } %>
                    <% if (current == pages) { %>
                    <li class="page-item"><a class="page-link disabled">>></a></li>
                    <% } else { %>
                    <li class="page-item"><a class="page-link" href="/administrador/<%= pages %>">>></a></li>
                    <% } %>
                </ul>
                <% } %>
                <% } %>
            </nav>
        </div>
    </div>

    <% include ./layouts/footer %>